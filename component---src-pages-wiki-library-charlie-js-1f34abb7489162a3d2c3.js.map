{"version":3,"sources":["webpack:///./src/components/book.js","webpack:///./src/components/books.js","webpack:///./src/components/library.js","webpack:///./src/pages/wiki/library/charlie.js"],"names":["Book","book","isReadingOrReaded","readings","length","key","title","className","to","link","itemProp","src","image","alt","author","name","map","r","end_date","start_date","Books","readed","reading","wantToRead","isFiltering","useState","showWantToRead","toggleWantToRead","showReading","toggleReading","showReaded","toggleReaded","onClick","b","FILTER","selectTheme","theme","borderRadius","colors","primary25","primary","getBooksProperties","library","readingBooks","readedBooks","authorSelect","titleSelect","genres","books","forEach","push","value","label","genre","genreSelect","getGenreSelect","k","g","translateGenre","sort","a","filterBooks","filters","filterByYear","year","Date","getFullYear","booksFiltered","filter","sortByReadingDate","ra","rb","Library","location","sortedBooks","lastReading","lastYear","now","selectYears","Array","from","_","i","y","handleFilters","updateBooks","select","onChange","f","options","path","triggerFiltersExpanded","isExpanded","isClearable","placeholder","v","action","Object","keys","isDisabled","want_to_read","LibraryCharlie"],"mappings":"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","file":"component---src-pages-wiki-library-charlie-js-1f34abb7489162a3d2c3.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"gatsby\"\n\nconst Book = ({ book }) => {\n  const isReadingOrReaded = book.readings.length > 0\n\n  return (\n    <li key={book.title} className=\"book-item\">\n      <section className=\"image\">\n        <Link to={book.link} itemProp=\"url\">\n          <img src={book.image} alt={book.title} />\n        </Link>\n      </section>\n      <section>\n        <h4>{book.title}</h4>\n        <span>\n          De{\" \"}\n          <Link to={book.author.link} itemProp=\"url\">\n            {book.author.name}\n          </Link>\n        </span>\n        {isReadingOrReaded && (\n          <div>\n            <span>Lecturas:</span>\n            <ul>\n              {book.readings.map(r => {\n                if (r.end_date && r.end_date !== \"\") {\n                  return (\n                    <li key={r.start_date}>\n                      <span>\n                        Del <time>{r.start_date}</time> al{\" \"}\n                        <time>{r.end_date}</time>\n                      </span>\n                    </li>\n                  )\n                } else {\n                  return (\n                    <li key={r.start_date}>\n                      <span>\n                        Empezado el <time>{r.start_date}</time>\n                      </span>\n                    </li>\n                  )\n                }\n              })}\n            </ul>\n          </div>\n        )}\n      </section>\n    </li>\n  )\n}\n\nexport default Book\n","import React, { useState } from \"react\"\n\nimport Book from \"./book\"\n\nconst Books = ({ readed, reading, wantToRead, isFiltering }) => {\n  const title = \"book-list-container\"\n  const [showWantToRead, toggleWantToRead] = useState(false)\n  const [showReading, toggleReading] = useState(true)\n  const [showReaded, toggleReaded] = useState(true)\n\n  return (\n    <div key={title} className={title}>\n      {wantToRead?.length > 0 && !isFiltering && (\n        <>\n          <button onClick={() => toggleWantToRead(!showWantToRead)}>\n            <h2>\n              <span\n                className={\n                  showWantToRead ? \"text-shadow\" : \"text-shadow-disabled\"\n                }\n              >\n                Quiero leer\n              </span>\n            </h2>\n          </button>\n          {showWantToRead && (\n            <ol className=\"book-list\">\n              {wantToRead.map(b => (\n                <Book key={b.title} book={b} />\n              ))}\n            </ol>\n          )}\n        </>\n      )}\n      {reading.length > 0 && !isFiltering && (\n        <>\n          <button onClick={() => toggleReading(!showReading)}>\n            <h2>\n              <span\n                className={showReading ? \"text-shadow\" : \"text-shadow-disabled\"}\n              >\n                Leyendo\n              </span>\n            </h2>\n          </button>\n          {showReading && (\n            <ol className=\"book-list\">\n              {reading.map(b => (\n                <Book key={b.title} book={b} />\n              ))}\n            </ol>\n          )}\n        </>\n      )}\n      <button onClick={() => toggleReaded(!showReaded)}>\n        <h2>\n          <span className={showReaded ? \"text-shadow\" : \"text-shadow-disabled\"}>\n            Leídos\n          </span>\n        </h2>\n      </button>\n      {showReaded && (\n        <ol className=\"book-list\">\n          {readed.map(b => (\n            <Book key={b.title} book={b} />\n          ))}\n        </ol>\n      )}\n    </div>\n  )\n}\n\nexport default Books\n","import React, { useState } from \"react\"\nimport Select from \"react-select\"\n\nimport Layout from \"./layout\"\nimport SEO from \"./seo\"\nimport Books from \"./books\"\nimport Filters from \"./filters\"\n\nconst FILTER = {\n  year: \"year\",\n  title: \"title\",\n  author: \"author\",\n  genre: \"genre\",\n}\n\nconst Library = ({ location, library }) => {\n  const title = library.name\n  const {\n    readingBooks,\n    readedBooks,\n    authorSelect,\n    titleSelect,\n    genreSelect,\n  } = getBooksProperties(library)\n\n  const sortedBooks = readedBooks.sort(\n    (a, b) =>\n      new Date(b.readings[0].end_date) - new Date(a.readings[0].end_date)\n  )\n\n  const lastReading = sortedBooks[sortedBooks.length - 1].readings[0]\n  const lastYear = lastReading.end_date\n    ? new Date(lastReading.end_date).getFullYear()\n    : new Date(lastReading.start_date).getFullYear()\n  const now = new Date()\n\n  const selectYears = Array.from(\n    { length: now.getFullYear() - lastYear + 1 },\n    (_, i) => {\n      const y = now.getFullYear() - i\n      return { value: y, label: y }\n    }\n  )\n\n  const [filters, handleFilters] = useState({ year: selectYears[0] })\n\n  const [books, updateBooks] = useState(\n    sortedBooks.filter(b => {\n      const lastReading = b.readings[0]\n      const year = lastReading.end_date\n        ? new Date(lastReading.end_date).getFullYear()\n        : new Date(lastReading.start_date).getFullYear()\n      return year === now.getFullYear()\n    })\n  )\n\n  const select = (\n    <div className=\"select-year\">\n      {selectYears.length > 1 && (\n        <Select\n          value={filters.year}\n          onChange={y => {\n            const f = { ...filters, year: y }\n            handleFilters(f)\n            updateBooks(\n              filterBooks({\n                books: readedBooks,\n                filters: f,\n              })\n            )\n          }}\n          options={selectYears}\n          theme={selectTheme}\n        />\n      )}\n    </div>\n  )\n\n  return (\n    <Layout location={location} title={title}>\n      <SEO title={title} />\n      <h1>{title}</h1>\n\n      <Filters\n        location={location}\n        title=\"Librerías\"\n        path=\"/wiki/library\"\n        select={select}\n        triggerFiltersExpanded={isExpanded => {\n          if (!isExpanded) {\n            const f = { year: selectYears[0] }\n            handleFilters(f)\n            updateBooks(\n              filterBooks({\n                books: readedBooks,\n                filters: f,\n              })\n            )\n          }\n        }}\n      >\n        <div className=\"select select-title\">\n          {filters.title && <span className=\"filter-name\">Título:</span>}\n          <Select\n            isClearable\n            placeholder=\"Título\"\n            options={titleSelect}\n            onChange={(v, { action }) => {\n              let f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.title = v\n              } else {\n                delete f[FILTER.title]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[0]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n        <div className=\"select select-author\">\n          {filters.author && <span className=\"filter-name\">Autor:</span>}\n          <Select\n            isClearable\n            placeholder=\"Autor\"\n            isDisabled={filters.title}\n            options={authorSelect}\n            onChange={(v, { action }) => {\n              const f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.author = v\n              } else {\n                delete f[FILTER.author]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[0]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n        <div className=\"select select-genre\">\n          {filters.genre && <span className=\"filter-name\">Género:</span>}\n          <Select\n            isClearable\n            placeholder=\"Género\"\n            isDisabled={filters.title}\n            options={genreSelect}\n            onChange={(v, { action }) => {\n              const f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.genre = v\n              } else {\n                delete f[FILTER.genre]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[0]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n      </Filters>\n\n      <Books\n        readed={books}\n        reading={readingBooks}\n        wantToRead={library.want_to_read}\n        isFiltering={filters.title || filters.author || filters.genre}\n      />\n    </Layout>\n  )\n}\n\nconst selectTheme = theme => ({\n  ...theme,\n  borderRadius: \"var(--radius-1)\",\n  colors: {\n    ...theme.colors,\n    primary25: \"var(--color-folders)\",\n    primary: \"var(--color-text-light)\",\n  },\n})\n\nconst getBooksProperties = library => {\n  const readingBooks = []\n  const readedBooks = []\n  const authorSelect = []\n  const titleSelect = []\n  const genres = {}\n\n  library.books.forEach(b => {\n    if (b.readings[0].end_date) {\n      readedBooks.push(b)\n      authorSelect.push({ value: b.author.name, label: b.author.name })\n      titleSelect.push({ value: b.title, label: b.title })\n\n      if (b.genre && !genres[b.genre]) {\n        genres[b.genre] = b.genre\n      }\n    } else {\n      readingBooks.push(b)\n    }\n  })\n\n  return {\n    readingBooks,\n    readedBooks,\n    authorSelect,\n    titleSelect,\n    genreSelect: getGenreSelect(genres),\n  }\n}\n\nconst getGenreSelect = genres => {\n  const genreSelect = []\n\n  for (let k in genres) {\n    const g = translateGenre(k)\n    genreSelect.push({ value: k, label: g })\n  }\n\n  return genreSelect.sort((a, b) => b.value < a.value)\n}\n\nconst translateGenre = genre => {\n  switch (genre) {\n    case \"fiction\":\n      return \"Ficción\"\n    case \"science-fiction\":\n      return \"Ciencia ficción\"\n    case \"fantasy\":\n      return \"Fantasía\"\n    case \"epistle\":\n      return \"Epistolar\"\n    case \"mithology\":\n      return \"Mitología\"\n    case \"philosophy\":\n      return \"Filosofía\"\n    case \"essay\":\n      return \"Ensayo\"\n    case \"biography\":\n      return \"Biografía\"\n    case \"historical\":\n      return \"Historia\"\n    case \"historical-fiction\":\n      return \"Ficción historica\"\n    case \"thriller\":\n      return \"Novela negra\"\n    default:\n      return genre\n  }\n}\n\nconst filterBooks = ({ books, filters }) => {\n  const filterByYear = filters.year\n  const year = filterByYear\n    ? new Date(filters.year.value + \"\").getFullYear()\n    : null\n\n  const booksFiltered = books.filter(b => {\n    if (filterByYear) {\n      for (let r of b.readings) {\n        if (\n          new Date(r.start_date).getFullYear() === year ||\n          new Date(r.end_date).getFullYear() === year\n        ) {\n          return true\n        }\n      }\n      return false\n    } else if (filters.title) {\n      return filters.title.value === b.title\n    } else {\n      for (let k in filters) {\n        if (k === FILTER.author) {\n          if (filters.author.value !== b[k]?.name) {\n            return false\n          }\n        } else {\n          if (filters[k].value !== b[k]) {\n            return false\n          }\n        }\n      }\n      return true\n    }\n  })\n\n  return filterByYear ? sortByReadingDate(booksFiltered, year) : booksFiltered\n}\n\nconst sortByReadingDate = (books, year) =>\n  books.sort((a, b) => {\n    for (let ra of a.readings) {\n      if (\n        new Date(ra.start_date).getFullYear() === year ||\n        new Date(ra.end_date).getFullYear() === year\n      ) {\n        for (let rb of b.readings) {\n          if (\n            new Date(rb.start_date).getFullYear() === year ||\n            new Date(rb.end_date).getFullYear() === year\n          ) {\n            return new Date(rb.end_date) - new Date(ra.end_date)\n          }\n        }\n      }\n    }\n    return false\n  })\n\nexport default Library\n","import React from \"react\"\n\nimport Library from \"../../../components/library\"\nimport library from \"../../../../content/wiki/library/library_charlie.json\"\n\nconst LibraryCharlie = ({ location }) => {\n  return <Library location={location} library={library} />\n}\n\nexport default LibraryCharlie\n"],"sourceRoot":""}