{"version":3,"sources":["webpack:///./src/components/book.js","webpack:///./src/components/books.js","webpack:///./src/components/library.js","webpack:///./src/pages/wiki/library/charlie.js"],"names":["Book","book","isReadingOrReaded","readings","length","key","title","className","to","link","itemProp","src","image","alt","author","name","map","r","end_date","start_date","not_ended","style","color","Books","readed","reading","wantToRead","isFiltering","useState","showWantToRead","toggleWantToRead","showReading","toggleReading","showReaded","toggleReaded","onClick","b","FILTER","selectTheme","theme","borderRadius","colors","primary25","primary","getBooksProperties","library","readingBooks","readedBooks","authorSelect","titleSelect","genres","books","forEach","isReaded","push","value","label","genre","genreSelect","getGenreSelect","k","g","translateGenre","sort","a","filterBooks","filters","filterByYear","year","Date","getFullYear","booksFiltered","filter","sortByReadingDate","ra","rb","Library","location","sortedBooks","da","lastReading","lastYear","now","selectYears","Array","from","_","i","y","handleFilters","updateBooks","select","onChange","f","options","path","triggerFiltersExpanded","isExpanded","isClearable","placeholder","v","action","Object","keys","isDisabled","want_to_read","LibraryCharlie"],"mappings":"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","file":"component---src-pages-wiki-library-charlie-js-47182394043e27c2bf2a.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"gatsby\"\n\nconst Book = ({ book }) => {\n  const isReadingOrReaded = book.readings.length > 0\n\n  return (\n    <li key={book.title} className=\"book-item\">\n      <section className=\"image\">\n        <Link to={book.link} itemProp=\"url\">\n          <img src={book.image} alt={book.title} />\n        </Link>\n      </section>\n      <section>\n        <h4>{book.title}</h4>\n        <span>\n          De{\" \"}\n          <Link to={book.author.link} itemProp=\"url\">\n            {book.author.name}\n          </Link>\n        </span>\n        {isReadingOrReaded && (\n          <div>\n            <span>Lecturas:</span>\n            <ul>\n              {book.readings.map(r => {\n                if (r.end_date && r.end_date !== \"\") {\n                  return (\n                    <li key={r.start_date}>\n                      <span>\n                        Del <time>{r.start_date}</time> al{\" \"}\n                        <time>{r.end_date}</time>\n                      </span>\n                    </li>\n                  )\n                } else {\n                  return (\n                    <li key={r.start_date}>\n                      <span>\n                        Empezado el <time>{r.start_date}</time>{\" \"}\n                        {r.not_ended && (\n                          <span>\n                            ~{\" \"}\n                            <em style={{ color: \"var(--color-hover)\" }}>\n                              abandonado\n                            </em>\n                          </span>\n                        )}\n                      </span>\n                    </li>\n                  )\n                }\n              })}\n            </ul>\n          </div>\n        )}\n      </section>\n    </li>\n  )\n}\n\nexport default Book\n","import React, { useState } from \"react\"\n\nimport Book from \"./book\"\n\nconst Books = ({ readed, reading, wantToRead, isFiltering }) => {\n  const title = \"book-list-container\"\n  const [showWantToRead, toggleWantToRead] = useState(false)\n  const [showReading, toggleReading] = useState(true)\n  const [showReaded, toggleReaded] = useState(true)\n\n  return (\n    <div key={title} className={title}>\n      {wantToRead?.length > 0 && !isFiltering && (\n        <>\n          <button onClick={() => toggleWantToRead(!showWantToRead)}>\n            <h2>\n              <span\n                className={\n                  showWantToRead ? \"text-shadow\" : \"text-shadow-disabled\"\n                }\n              >\n                Quiero leer\n              </span>\n            </h2>\n          </button>\n          {showWantToRead && (\n            <ol className=\"book-list\">\n              {wantToRead.map(b => (\n                <Book key={b.title} book={b} />\n              ))}\n            </ol>\n          )}\n        </>\n      )}\n      {reading.length > 0 && !isFiltering && (\n        <>\n          <button onClick={() => toggleReading(!showReading)}>\n            <h2>\n              <span\n                className={showReading ? \"text-shadow\" : \"text-shadow-disabled\"}\n              >\n                Leyendo\n              </span>\n            </h2>\n          </button>\n          {showReading && (\n            <ol className=\"book-list\">\n              {reading.map(b => (\n                <Book key={b.title} book={b} />\n              ))}\n            </ol>\n          )}\n        </>\n      )}\n      <button onClick={() => toggleReaded(!showReaded)}>\n        <h2>\n          <span className={showReaded ? \"text-shadow\" : \"text-shadow-disabled\"}>\n            Lecturas\n          </span>\n        </h2>\n      </button>\n      {showReaded && (\n        <ol className=\"book-list\">\n          {readed.map(b => (\n            <Book key={b.title} book={b} />\n          ))}\n        </ol>\n      )}\n    </div>\n  )\n}\n\nexport default Books\n","import React, { useState } from \"react\"\nimport Select from \"react-select\"\n\nimport Layout from \"./layout\"\nimport SEO from \"./seo\"\nimport Books from \"./books\"\nimport Filters from \"./filters\"\n\nconst FILTER = {\n  year: \"year\",\n  title: \"title\",\n  author: \"author\",\n  genre: \"genre\",\n}\n\nconst FIRST_ELEMENT = 0\n\nconst Library = ({ location, library }) => {\n  const title = library.name\n  const {\n    readingBooks,\n    readedBooks,\n    authorSelect,\n    titleSelect,\n    genreSelect,\n  } = getBooksProperties(library)\n\n  const sortedBooks = readedBooks.sort((a, b) => {\n    const da = a.readings[FIRST_ELEMENT].not_ended\n      ? new Date(a.readings[FIRST_ELEMENT].start_date)\n      : new Date(a.readings[FIRST_ELEMENT].end_date)\n    const db = b.readings[FIRST_ELEMENT].not_ended\n      ? new Date(b.readings[FIRST_ELEMENT].start_date)\n      : new Date(b.readings[FIRST_ELEMENT].end_date)\n\n    return db - da\n  })\n\n  const lastReading =\n    sortedBooks[sortedBooks.length - 1].readings[FIRST_ELEMENT]\n  const lastYear = lastReading.end_date\n    ? new Date(lastReading.end_date).getFullYear()\n    : new Date(lastReading.start_date).getFullYear()\n  const now = new Date()\n\n  const selectYears = Array.from(\n    { length: now.getFullYear() - lastYear + 1 },\n    (_, i) => {\n      const y = now.getFullYear() - i\n      return { value: y, label: y }\n    }\n  )\n\n  const [filters, handleFilters] = useState({\n    year: selectYears[FIRST_ELEMENT],\n  })\n\n  const [books, updateBooks] = useState(\n    sortedBooks.filter(b => {\n      const lastReading = b.readings[FIRST_ELEMENT]\n      const year = lastReading.end_date\n        ? new Date(lastReading.end_date).getFullYear()\n        : new Date(lastReading.start_date).getFullYear()\n      return year === now.getFullYear()\n    })\n  )\n\n  const select = (\n    <div className=\"select-year\">\n      {selectYears.length > 1 && (\n        <Select\n          value={filters.year}\n          onChange={y => {\n            const f = { ...filters, year: y }\n            handleFilters(f)\n            updateBooks(\n              filterBooks({\n                books: readedBooks,\n                filters: f,\n              })\n            )\n          }}\n          options={selectYears}\n          theme={selectTheme}\n        />\n      )}\n    </div>\n  )\n\n  return (\n    <Layout location={location} title={title}>\n      <SEO title={title} />\n      <h1>{title}</h1>\n\n      <Filters\n        location={location}\n        title=\"Librerías\"\n        path=\"/wiki/library\"\n        select={select}\n        triggerFiltersExpanded={isExpanded => {\n          if (!isExpanded) {\n            const f = { year: selectYears[FIRST_ELEMENT] }\n            handleFilters(f)\n            updateBooks(\n              filterBooks({\n                books: readedBooks,\n                filters: f,\n              })\n            )\n          }\n        }}\n      >\n        <div className=\"select select-title\">\n          {filters.title && <span className=\"filter-name\">Título:</span>}\n          <Select\n            isClearable\n            placeholder=\"Título\"\n            options={titleSelect}\n            onChange={(v, { action }) => {\n              let f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.title = v\n              } else {\n                delete f[FILTER.title]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[FIRST_ELEMENT]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n        <div className=\"select select-author\">\n          {filters.author && <span className=\"filter-name\">Autor:</span>}\n          <Select\n            isClearable\n            placeholder=\"Autor\"\n            isDisabled={filters.title}\n            options={authorSelect}\n            onChange={(v, { action }) => {\n              const f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.author = v\n              } else {\n                delete f[FILTER.author]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[FIRST_ELEMENT]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n        <div className=\"select select-genre\">\n          {filters.genre && <span className=\"filter-name\">Género:</span>}\n          <Select\n            isClearable\n            placeholder=\"Género\"\n            isDisabled={filters.title}\n            options={genreSelect}\n            onChange={(v, { action }) => {\n              const f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.genre = v\n              } else {\n                delete f[FILTER.genre]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[FIRST_ELEMENT]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n      </Filters>\n\n      <Books\n        readed={books}\n        reading={readingBooks}\n        wantToRead={library.want_to_read}\n        isFiltering={filters.title || filters.author || filters.genre}\n      />\n    </Layout>\n  )\n}\n\nconst selectTheme = theme => ({\n  ...theme,\n  borderRadius: \"var(--radius-1)\",\n  colors: {\n    ...theme.colors,\n    primary25: \"var(--color-folders)\",\n    primary: \"var(--color-text-light)\",\n  },\n})\n\nconst getBooksProperties = library => {\n  const readingBooks = []\n  const readedBooks = []\n  const authorSelect = []\n  const titleSelect = []\n  const genres = {}\n\n  library.books.forEach(b => {\n    let isReaded = false\n    for (let r of b.readings) {\n      if (r.not_ended || r.end_date) {\n        isReaded = true\n      }\n    }\n\n    if (isReaded) {\n      readedBooks.push(b)\n      authorSelect.push({ value: b.author.name, label: b.author.name })\n      titleSelect.push({ value: b.title, label: b.title })\n\n      if (b.genre && !genres[b.genre]) {\n        genres[b.genre] = b.genre\n      }\n    } else {\n      readingBooks.push(b)\n    }\n  })\n\n  return {\n    readingBooks,\n    readedBooks,\n    authorSelect,\n    titleSelect,\n    genreSelect: getGenreSelect(genres),\n  }\n}\n\nconst getGenreSelect = genres => {\n  const genreSelect = []\n\n  for (let k in genres) {\n    const g = translateGenre(k)\n    genreSelect.push({ value: k, label: g })\n  }\n\n  return genreSelect.sort((a, b) => b.value < a.value)\n}\n\nconst translateGenre = genre => {\n  switch (genre) {\n    case \"fiction\":\n      return \"Ficción\"\n    case \"science-fiction\":\n      return \"Ciencia ficción\"\n    case \"fantasy\":\n      return \"Fantasía\"\n    case \"epistle\":\n      return \"Epistolar\"\n    case \"mithology\":\n      return \"Mitología\"\n    case \"philosophy\":\n      return \"Filosofía\"\n    case \"essay\":\n      return \"Ensayo\"\n    case \"biography\":\n      return \"Biografía\"\n    case \"historical\":\n      return \"Historia\"\n    case \"historical-fiction\":\n      return \"Ficción historica\"\n    case \"thriller\":\n      return \"Novela negra\"\n    default:\n      return genre\n  }\n}\n\nconst filterBooks = ({ books, filters }) => {\n  const filterByYear = filters.year\n  const year = filterByYear\n    ? new Date(filters.year.value + \"\").getFullYear()\n    : null\n\n  const booksFiltered = books.filter(b => {\n    if (filterByYear) {\n      for (let r of b.readings) {\n        if (\n          new Date(r.start_date).getFullYear() === year ||\n          new Date(r.end_date).getFullYear() === year\n        ) {\n          return true\n        }\n      }\n      return false\n    } else if (filters.title) {\n      return filters.title.value === b.title\n    } else {\n      for (let k in filters) {\n        if (k === FILTER.author) {\n          if (filters.author.value !== b[k]?.name) {\n            return false\n          }\n        } else {\n          if (filters[k].value !== b[k]) {\n            return false\n          }\n        }\n      }\n      return true\n    }\n  })\n\n  return filterByYear ? sortByReadingDate(booksFiltered, year) : booksFiltered\n}\n\nconst sortByReadingDate = (books, year) =>\n  books.sort((a, b) => {\n    for (let ra of a.readings) {\n      if (\n        new Date(ra.start_date).getFullYear() === year ||\n        new Date(ra.end_date).getFullYear() === year\n      ) {\n        for (let rb of b.readings) {\n          if (\n            new Date(rb.start_date).getFullYear() === year ||\n            new Date(rb.end_date).getFullYear() === year\n          ) {\n            return new Date(rb.end_date) - new Date(ra.end_date)\n          }\n        }\n      }\n    }\n    return false\n  })\n\nexport default Library\n","import React from \"react\"\n\nimport Library from \"../../../components/library\"\nimport library from \"../../../../content/wiki/library/library_charlie.json\"\n\nconst LibraryCharlie = ({ location }) => {\n  return <Library location={location} library={library} />\n}\n\nexport default LibraryCharlie\n"],"sourceRoot":""}