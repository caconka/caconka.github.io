{"version":3,"file":"component---src-pages-wiki-library-charlie-js-2e3fceced857140eeae0.js","mappings":"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","sources":["webpack://digital-garden/./src/components/book.js","webpack://digital-garden/./src/components/books.js","webpack://digital-garden/./src/components/library.js","webpack://digital-garden/./src/pages/wiki/library/charlie.js"],"sourcesContent":["import React from \"react\"\nimport { Link } from \"gatsby\"\n\nconst Book = ({ book }) => {\n  const isReadingOrReaded = book.readings.length > 0\n\n  return (\n    <li key={book.title} className=\"book-item\">\n      <section className=\"image\">\n        <Link to={book.link} itemProp=\"url\">\n          <img src={book.image} alt={book.title} />\n        </Link>\n      </section>\n      <section>\n        <h4>{book.title}</h4>\n        <span>\n          De{\" \"}\n          <Link to={book.author.link} itemProp=\"url\">\n            {book.author.name}\n          </Link>\n        </span>\n        {isReadingOrReaded && (\n          <div>\n            <span>Lecturas:</span>\n            <ul>\n              {book.readings.map(r => {\n                if (r.end_date && r.end_date !== \"\") {\n                  return (\n                    <li key={r.start_date}>\n                      <span>\n                        Del <time>{r.start_date}</time> al{\" \"}\n                        <time>{r.end_date}</time>\n                      </span>\n                    </li>\n                  )\n                } else {\n                  return (\n                    <li key={r.start_date}>\n                      <span>\n                        Empezado el <time>{r.start_date}</time>{\" \"}\n                        {r.not_ended && (\n                          <span>\n                            ~{\" \"}\n                            <em style={{ color: \"var(--color-hover)\" }}>\n                              abandonado\n                            </em>\n                          </span>\n                        )}\n                      </span>\n                    </li>\n                  )\n                }\n              })}\n            </ul>\n          </div>\n        )}\n      </section>\n    </li>\n  )\n}\n\nexport default Book\n","import React, { useState } from \"react\"\n\nimport Book from \"./book\"\n\nconst Books = ({ readed, reading, wantToRead, isFiltering }) => {\n  const title = \"book-list-container\"\n  const [showWantToRead, toggleWantToRead] = useState(false)\n  const [showReading, toggleReading] = useState(true)\n  const [showReaded, toggleReaded] = useState(true)\n\n  return (\n    <div key={title} className={title}>\n      {wantToRead?.length > 0 && !isFiltering && (\n        <>\n          <button onClick={() => toggleWantToRead(!showWantToRead)}>\n            <h2>\n              <span\n                className={\n                  showWantToRead ? \"text-shadow\" : \"text-shadow-disabled\"\n                }\n              >\n                Quiero leer\n              </span>\n            </h2>\n          </button>\n          {showWantToRead && (\n            <ol className=\"book-list\">\n              {wantToRead.map(b => (\n                <Book key={b.title} book={b} />\n              ))}\n            </ol>\n          )}\n        </>\n      )}\n      {reading.length > 0 && !isFiltering && (\n        <>\n          <button onClick={() => toggleReading(!showReading)}>\n            <h2>\n              <span\n                className={showReading ? \"text-shadow\" : \"text-shadow-disabled\"}\n              >\n                Leyendo\n              </span>\n            </h2>\n          </button>\n          {showReading && (\n            <ol className=\"book-list\">\n              {reading.map(b => (\n                <Book key={b.title} book={b} />\n              ))}\n            </ol>\n          )}\n        </>\n      )}\n      <button onClick={() => toggleReaded(!showReaded)}>\n        <h2>\n          <span className={showReaded ? \"text-shadow\" : \"text-shadow-disabled\"}>\n            Lecturas\n          </span>\n        </h2>\n      </button>\n      {showReaded && (\n        <ol className=\"book-list\">\n          {readed.map(b => (\n            <Book key={b.title} book={b} />\n          ))}\n        </ol>\n      )}\n    </div>\n  )\n}\n\nexport default Books\n","import React, { useState } from \"react\"\nimport Select from \"react-select\"\n\nimport Layout from \"./layout\"\nimport SEO from \"./seo\"\nimport Books from \"./books\"\nimport Filters from \"./filters\"\n\nconst FILTER = {\n  year: \"year\",\n  title: \"title\",\n  author: \"author\",\n  genre: \"genre\",\n}\n\nconst FIRST_ELEMENT = 0\n\nconst Library = ({ location, library }) => {\n  const title = library.name\n  const { readingBooks, readedBooks, authorSelect, titleSelect, genreSelect } =\n    getBooksProperties(library)\n\n  const sortedBooks = readedBooks.sort((a, b) => {\n    const da = a.readings[FIRST_ELEMENT].not_ended\n      ? new Date(a.readings[FIRST_ELEMENT].start_date)\n      : new Date(a.readings[FIRST_ELEMENT].end_date)\n    const db = b.readings[FIRST_ELEMENT].not_ended\n      ? new Date(b.readings[FIRST_ELEMENT].start_date)\n      : new Date(b.readings[FIRST_ELEMENT].end_date)\n\n    return db - da\n  })\n\n  const lastReading =\n    sortedBooks[sortedBooks.length - 1].readings[FIRST_ELEMENT]\n  const lastYear = lastReading.end_date\n    ? new Date(lastReading.end_date).getFullYear()\n    : new Date(lastReading.start_date).getFullYear()\n  const now = new Date()\n\n  const selectYears = Array.from(\n    { length: now.getFullYear() - lastYear + 1 },\n    (_, i) => {\n      const y = now.getFullYear() - i\n      return { value: y, label: y }\n    }\n  )\n\n  const [filters, handleFilters] = useState({\n    year: selectYears[FIRST_ELEMENT],\n  })\n\n  const [books, updateBooks] = useState(\n    sortedBooks.filter(b => {\n      const lastReading = b.readings[FIRST_ELEMENT]\n      const year = lastReading.end_date\n        ? new Date(lastReading.end_date).getFullYear()\n        : new Date(lastReading.start_date).getFullYear()\n      return year === now.getFullYear()\n    })\n  )\n\n  const select = (\n    <div className=\"select-year\">\n      {selectYears.length > 1 && (\n        <Select\n          value={filters.year}\n          onChange={y => {\n            const f = { ...filters, year: y }\n            handleFilters(f)\n            updateBooks(\n              filterBooks({\n                books: readedBooks,\n                filters: f,\n              })\n            )\n          }}\n          options={selectYears}\n          theme={selectTheme}\n        />\n      )}\n    </div>\n  )\n\n  return (\n    <Layout location={location} title={title}>\n      <SEO title={title} />\n      <h1>{title}</h1>\n\n      <Filters\n        location={location}\n        title=\"Librerías\"\n        path=\"/wiki/library\"\n        select={select}\n        triggerFiltersExpanded={isExpanded => {\n          if (!isExpanded) {\n            const f = { year: selectYears[FIRST_ELEMENT] }\n            handleFilters(f)\n            updateBooks(\n              filterBooks({\n                books: readedBooks,\n                filters: f,\n              })\n            )\n          }\n        }}\n      >\n        <div className=\"select select-title\">\n          {filters.title && <span className=\"filter-name\">Título:</span>}\n          <Select\n            isClearable\n            placeholder=\"Título\"\n            options={titleSelect}\n            onChange={(v, { action }) => {\n              let f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.title = v\n              } else {\n                delete f[FILTER.title]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[FIRST_ELEMENT]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n        <div className=\"select select-author\">\n          {filters.author && <span className=\"filter-name\">Autor:</span>}\n          <Select\n            isClearable\n            placeholder=\"Autor\"\n            isDisabled={filters.title}\n            options={authorSelect}\n            onChange={(v, { action }) => {\n              const f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.author = v\n              } else {\n                delete f[FILTER.author]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[FIRST_ELEMENT]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n        <div className=\"select select-genre\">\n          {filters.genre && <span className=\"filter-name\">Género:</span>}\n          <Select\n            isClearable\n            placeholder=\"Género\"\n            isDisabled={filters.title}\n            options={genreSelect}\n            onChange={(v, { action }) => {\n              const f = { ...filters }\n              if (action === \"select-option\") {\n                delete f[FILTER.year]\n                f.genre = v\n              } else {\n                delete f[FILTER.genre]\n                if (Object.keys(f).length === 0) {\n                  f.year = selectYears[FIRST_ELEMENT]\n                }\n              }\n\n              handleFilters(f)\n              updateBooks(\n                filterBooks({\n                  books: readedBooks,\n                  filters: f,\n                })\n              )\n            }}\n            theme={selectTheme}\n          />\n        </div>\n      </Filters>\n\n      <Books\n        readed={books}\n        reading={readingBooks}\n        wantToRead={library.want_to_read}\n        isFiltering={filters.title || filters.author || filters.genre}\n      />\n    </Layout>\n  )\n}\n\nconst selectTheme = theme => ({\n  ...theme,\n  borderRadius: \"var(--radius-1)\",\n  colors: {\n    ...theme.colors,\n    primary25: \"var(--color-folders)\",\n    primary: \"var(--color-text-light)\",\n  },\n})\n\nconst getBooksProperties = library => {\n  const readingBooks = []\n  const readedBooks = []\n  const authorSelect = []\n  const titleSelect = []\n  const genres = {}\n\n  library.books.forEach(b => {\n    let isReaded = false\n    for (let r of b.readings) {\n      if (r.not_ended || r.end_date) {\n        isReaded = true\n      }\n    }\n\n    if (isReaded) {\n      readedBooks.push(b)\n      authorSelect.push({ value: b.author.name, label: b.author.name })\n      titleSelect.push({ value: b.title, label: b.title })\n\n      if (b.genre && !genres[b.genre]) {\n        genres[b.genre] = b.genre\n      }\n    } else {\n      readingBooks.push(b)\n    }\n  })\n\n  return {\n    readingBooks,\n    readedBooks,\n    authorSelect,\n    titleSelect,\n    genreSelect: getGenreSelect(genres),\n  }\n}\n\nconst getGenreSelect = genres => {\n  const genreSelect = []\n\n  for (let k in genres) {\n    const g = translateGenre(k)\n    genreSelect.push({ value: k, label: g })\n  }\n\n  return genreSelect.sort((a, b) => b.value < a.value)\n}\n\nconst translateGenre = genre => {\n  switch (genre) {\n    case \"fiction\":\n      return \"Novela\"\n    case \"thriller\":\n      return \"Novela negra\"\n    case \"historical-fiction\":\n      return \"Novela historica\"\n    case \"science-fiction\":\n      return \"Ciencia ficción\"\n    case \"fantasy\":\n      return \"Fantasía\"\n    case \"epistle\":\n      return \"Epistolar\"\n    case \"mithology\":\n      return \"Mitología\"\n    case \"classic\":\n      return \"Clásica\"\n    case \"philosophy\":\n      return \"Filosofía\"\n    case \"essay\":\n      return \"Ensayo\"\n    case \"biography\":\n      return \"Biografía\"\n    case \"historical\":\n      return \"Historia\"\n    default:\n      return genre\n  }\n}\n\nconst filterBooks = ({ books, filters }) => {\n  const filterByYear = filters.year\n  const year = filterByYear\n    ? new Date(filters.year.value + \"\").getFullYear()\n    : null\n\n  const booksFiltered = books.filter(b => {\n    if (filterByYear) {\n      for (let r of b.readings) {\n        if (\n          new Date(r.start_date).getFullYear() === year ||\n          new Date(r.end_date).getFullYear() === year\n        ) {\n          return true\n        }\n      }\n      return false\n    } else if (filters.title) {\n      return filters.title.value === b.title\n    } else {\n      for (let k in filters) {\n        if (k === FILTER.author) {\n          if (filters.author.value !== b[k]?.name) {\n            return false\n          }\n        } else {\n          if (filters[k].value !== b[k]) {\n            return false\n          }\n        }\n      }\n      return true\n    }\n  })\n\n  return filterByYear ? sortByReadingDate(booksFiltered, year) : booksFiltered\n}\n\nconst sortByReadingDate = (books, year) =>\n  books.sort((a, b) => {\n    for (let ra of a.readings) {\n      if (\n        new Date(ra.start_date).getFullYear() === year ||\n        new Date(ra.end_date).getFullYear() === year\n      ) {\n        for (let rb of b.readings) {\n          if (\n            new Date(rb.start_date).getFullYear() === year ||\n            new Date(rb.end_date).getFullYear() === year\n          ) {\n            return new Date(rb.end_date) - new Date(ra.end_date)\n          }\n        }\n      }\n    }\n    return false\n  })\n\nexport default Library\n","import React from \"react\"\n\nimport Library from \"../../../components/library\"\nimport library from \"../../../../content/wiki/library/library-charlie.json\"\n\nconst LibraryCharlie = ({ location }) => {\n  return <Library location={location} library={library} />\n}\n\nexport default LibraryCharlie\n"],"names":["book","isReadingOrReaded","readings","length","key","title","className","Link","to","link","itemProp","src","image","alt","author","name","map","r","end_date","start_date","not_ended","style","color","readed","reading","wantToRead","isFiltering","showWantToRead","toggleWantToRead","useState","showReading","toggleReading","showReaded","toggleReaded","onClick","b","FILTER","selectTheme","theme","borderRadius","colors","primary25","primary","getBooksProperties","library","readingBooks","readedBooks","authorSelect","titleSelect","genres","books","forEach","isReaded","push","value","label","genre","genreSelect","getGenreSelect","k","g","translateGenre","sort","a","filterBooks","filters","filterByYear","year","Date","getFullYear","booksFiltered","filter","sortByReadingDate","ra","rb","location","sortedBooks","da","lastReading","lastYear","now","selectYears","Array","from","_","i","y","handleFilters","updateBooks","select","onChange","f","options","path","triggerFiltersExpanded","isExpanded","isClearable","placeholder","v","action","Object","keys","isDisabled","want_to_read"],"sourceRoot":""}